---
page_title: "emaildns_dmarc Data Source - emaildns"
subcategory: ""
description: |-
  Validates a DMARC (Domain-based Message Authentication, Reporting, and Conformance) DNS TXT record.
---

# emaildns_dmarc (Data Source)

Validates a DMARC DNS TXT record per [RFC 7489](https://datatracker.ietf.org/doc/html/rfc7489). If the record is invalid, `terraform plan` fails with a specific error message.

## Example Usage

```hcl
# Basic DMARC record
data "emaildns_dmarc" "basic" {
  record = "v=DMARC1; p=none"
}

# Full DMARC record with reporting
data "emaildns_dmarc" "full" {
  record = "v=DMARC1; p=reject; sp=quarantine; adkim=s; aspf=s; pct=100; rua=mailto:dmarc-agg@example.com; ruf=mailto:dmarc-forensic@example.com"
}

# Use with Cloudflare
resource "cloudflare_record" "dmarc" {
  zone_id = var.zone_id
  name    = "_dmarc"
  type    = "TXT"
  content = data.emaildns_dmarc.full.record
}
```

## Validation Rules

The following validations are performed:

- Record must start with `v=DMARC1`
- Required: `p` tag (policy) - must be `none`, `quarantine`, or `reject`
- Optional tags are validated if present:
  - `sp` (subdomain policy) - must be `none`, `quarantine`, or `reject`
  - `adkim` (DKIM alignment) - must be `r` (relaxed) or `s` (strict)
  - `aspf` (SPF alignment) - must be `r` (relaxed) or `s` (strict)
  - `pct` (percentage) - must be 0-100
  - `rua` (aggregate report URIs) - comma-separated list
  - `ruf` (forensic report URIs) - comma-separated list
  - `fo` (failure options) - must be `0`, `1`, `d`, or `s`
  - `rf` (report format) - must be `afrf`
  - `ri` (report interval) - positive integer (seconds)

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `record` (String) The DMARC TXT record content to validate (e.g., `v=DMARC1; p=reject; rua=mailto:dmarc@example.com`)

### Read-Only

- `dkim_alignment` (String) The DKIM alignment mode (r for relaxed, s for strict)
- `percent` (Number) The percentage of messages to which the policy applies (0-100)
- `policy` (String) The parsed policy value (none, quarantine, or reject)
- `report_uri_aggregate` (List of String) List of URIs for aggregate reports (rua tag)
- `report_uri_failure` (List of String) List of URIs for failure reports (ruf tag)
- `spf_alignment` (String) The SPF alignment mode (r for relaxed, s for strict)
- `subdomain_policy` (String) The parsed subdomain policy value (sp tag)
