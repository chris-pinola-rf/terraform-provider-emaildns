---
page_title: "emaildns_spf Data Source - emaildns"
subcategory: ""
description: |-
  Validates an SPF (Sender Policy Framework) DNS TXT record.
---

# emaildns_spf (Data Source)

Validates an SPF DNS TXT record per [RFC 7208](https://datatracker.ietf.org/doc/html/rfc7208). If the record is invalid, `terraform plan` fails with a specific error message.

## Example Usage

```hcl
# Basic SPF record
data "emaildns_spf" "basic" {
  record = "v=spf1 include:_spf.google.com ~all"
}

# SPF record with multiple mechanisms
data "emaildns_spf" "full" {
  record = "v=spf1 ip4:192.0.2.0/24 ip6:2001:db8::/32 include:_spf.google.com include:amazonses.com -all"
}

# Use with Cloudflare
resource "cloudflare_record" "spf" {
  zone_id = var.zone_id
  name    = "@"
  type    = "TXT"
  content = data.emaildns_spf.full.record
}

# Check DNS lookup count (SPF has a 10-lookup limit)
output "spf_lookups" {
  value = data.emaildns_spf.full.dns_lookup_count
}
```

## Validation Rules

The following validations are performed:

- Record must start with `v=spf1`
- All mechanisms must be valid:
  - `all` - matches all senders
  - `include:<domain>` - include another domain's SPF policy
  - `a` or `a:<domain>` - match the A/AAAA record of a domain
  - `mx` or `mx:<domain>` - match the MX record of a domain
  - `ip4:<address>` or `ip4:<network>/<prefix>` - match IPv4 address or CIDR
  - `ip6:<address>` or `ip6:<network>/<prefix>` - match IPv6 address or CIDR
  - `exists:<domain>` - match if domain exists
  - `ptr` (deprecated) - match PTR record
- Qualifiers must be valid: `+` (pass), `-` (fail), `~` (softfail), `?` (neutral)
- Modifiers are validated if present:
  - `redirect=<domain>` - redirect to another SPF record
  - `exp=<domain>` - explanation string

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `record` (String) The SPF TXT record content to validate (e.g., `v=spf1 include:_spf.google.com ~all`)

### Read-Only

- `dns_lookup_count` (Number) Number of mechanisms that require DNS lookups (SPF allows max 10)
- `mechanisms` (List of Object) List of parsed SPF mechanisms (see [below for nested schema](#nestedatt--mechanisms))
- `redirect` (String) The redirect modifier value, if present

<a id="nestedatt--mechanisms"></a>
### Nested Schema for `mechanisms`

Read-Only:

- `qualifier` (String) The qualifier (+ for pass, - for fail, ~ for softfail, ? for neutral)
- `type` (String) The mechanism type (all, include, a, mx, ip4, ip6, exists, ptr)
- `value` (String) The mechanism value (domain, IP range, etc.)
